> * 问了下分布式存储的设计要考虑什么？
> * 问了下数据库和分布式存储的区别？
> * 高可用怎么做？
> * 分布式kv怎么实现？
> * 怎么实现一致性？
> * 问了下raft 和 paxos区别？
> * 问了下 kv存储引擎怎么实现？
>
> 百度分布式存储部门：
>   ACID是什么
>
>   CAP是什么
>
>   RAFT如是实现投票？
>   经典的超过半数投票……
>
>   Zookeeper如何避免脑裂?
>   
>   答：采用2N+1个 replica。
>   反问：如果有一个宕机了就不能了吗？
>   答：不能，要么手动再宕机一个节点，要么加上一个replica。不然容易出问题
>   好像认可了我的答案……
>   
>   分布式系统中如果我向replic请求读，但是这个replic不是最新状态怎么办？
>   
>   简单介绍一下mapReduce。
>
> 



nginx

https://zhuanlan.zhihu.com/p/34943332

Hadoop框架

> 具体看这个：
>
> reference:https://zhuanlan.zhihu.com/p/54994736

​	分布式存储的话，了解过Hadoop框架，但没用过。Hadoop也使用了 ZooKeeper ，做 Namenode 的高可用。

​	核心架构主要是HDFS和MapReduce，HDFS为海量数据提供了**存储**，而MapReduce为海量数据提供了**计算框架**。

<img src="E:\MarkDown\picture\image-20230701210745935.png" alt="image-20230701210745935" style="zoom:50%;" />

**HDFS**

​	主要包括**NameNode**（名称节点）、**DataNode**（数据节点）和**Client**（客户机）。

<img src="E:\MarkDown\picture\image-20230701210827045.png" alt="image-20230701210827045" style="zoom:50%;" />

**NameNode：**是Master节点（主节点），可以看作是分布式文件系统中的管理者，主要负责管理文件系统的命名空间、集群配置信息和存储块的复制等。NameNode会将文件系统的Meta-data存储在内存中，这些信息主要包括了文件信息、每一个文件对应的文件块的信息和每一个文件块在DataNode的信息等。

**DataNode：**是Slave节点（从节点），是文件存储的基本单元，它将Block存储在本地文件系统中，保存了Block的Meta-data，同时周期性地将所有存在的Block信息发送给NameNode。

**Client：**切分文件；访问HDFS；与NameNode交互，获得文件位置信息；与DataNode交互，读取和写入数据。 



还有一个**Block（块）**的概念：Block是HDFS中的基本读写单元；HDFS中的文件都是被切割为block（块）进行存储的；这些块被复制到多个DataNode中；块的大小（通常为64MB）和复制的块数量在创建文件时由Client决定。



## hw分布式存储

技术栈：虚拟ip + keep alived + nginx负载实现

[image-20230629155009147]

**应用网关软件**

 检测任务的分发和检测结果的回收。

 可以连接 计算节点、选择算法包（手动的，后续需要优化）、选择要检测的批次，然后就会把算法包同步到计算节点上。

 这些计算节点是在不同电脑上的不同进程，会自动分配给这些计算节点任务数。运算的快的节点就多分配些任务。

**AI计算节点服务**

 这个软件就是在不同机器上的，显示计算节点的情况。由 **应用网关软件** 调用，**AI计算节点服务** 执行相应的算法包

**上位管理软件**

 就是如果 **AI计算节点服务** 挂掉了，就重启。就是管理 **AI计算节点服务** 软件。



分布式存储：

 之前是将图片存在...???然后现在打算的改进就是：

 有个专门的存储服务器存图片，可能有多个主机，但对外就一个。将图片存储在不同的地方。