标注工具位置

D:\往年资料\2021年-毕业 车鑫-交接（人体姿态估计行为识别\程序\选区匹配工具

内含匹配工具和labelme



## tmux

> 一个tmux中可以有多个session
> 一个session中可以有多个window
> 一个window可以有多个pane
>
> 所有的tmux命令都以 ctrl+b为前缀，先按下这两个键后松开，然后按其他键



`tmux new -s` [起个名]，或者直接`tmux`，默认的名字按数字排序，创建新session

`tmux a`，连接指定的话是`tmux a -t [名字]`，重新连接退出的session

`tmux ls`，查看所有session



**`ctrl+b %`** 在当前窗口创建一个pane

`ctrl+b o` 切换pane
或`c+a 方向键`，在多个pane中切换



`c+b c `创建一个window

`c+b [名字]` 切换窗口



`c+b &`关闭当前窗口

`c+b x `关闭当前pane

**c+d 删除**当前pane，多个window下删除当前window，若只有一个window，删除当前session

**c+b d 退回终端** 此步骤是将session挂起，程序还是会在后台继续运行



## linux

cd
cd / 切换到根目录
cd ..或cd ../ 切换到上级目录

ls

history 10 查看十条历史命令
!2048 执行2048条语句

## 杂

[github搜索技巧](https://zhuanlan.zhihu.com/p/356332525)



B站网页版倍速播放
F12：document.querySelector('video').playbackRate = 2.5



对笔记本环境的更改
1、Jupyter内核报错
[ImportError: DLL load failed while importing win32api:找不指定模块](https://blog.csdn.net/jinchenpeng/article/details/118876083)：将pywin32从303改为了227
后报错win10运行anaconda提示无法定位程序输入点**/pythoncom38.dll，通过conda update -n base conda将conda更新后解决

[github进不去](https://zhuanlan.zhihu.com/p/439692081)

## 服务器

重启 sudo reboot
关机 sudo shutdown -h

结束上个命令 ctrl + c



查看CUDA版本：cat /usr/local/cuda/version.txt![image-20220813180336067](E:\MarkDown\picture\image-20220813180336067.png)



查看自己ip：ipconfig，其中IPv4 地址就是您需要的远程IP地址。
查看服务器ip：ifconfig
SSH登录服务器报ECDSA host key "ip地址" for  has changed and you have requested strict checking错误：ssh-keygen -R "你的远程服务器ip地址"

服务器teamviewer远程
账户465094237
密码123456

向日葵

665631266
123456

查看每个用户存储空间：sudo du -sh /home/*
每个用户差不多120G

查看dataset下自己文件夹空间
sudo du -sh /dataset/wh/*



终端

4*1080Ti
ssh handsome@192.168.0.106
1226
ssh chexin@192.168.0.106
che

4*2080Ti
ssh nsw@192.168.1.116
nsw123
ssh -o ServerAliveInterval=30 celia@192.168.0.109
che





服务器占用情况：watch -n 2 nvidia-smi

查看当前Cuda的版本，即实际安装的Cuda版本：nvcc -V

[linux查找文件](https://www.php.cn/linux-475644.html)



cmd命令行工具，输入labeme





训练时指定GPU：终端执行程序时在前面加上CUDA_VISIBLE_DEVICES=0,1,3



查看nvidia上所有进程的详细信息（`nvidia-smi`信息不全），检查PID号进程是否在多个GPU上运行
sudo fuser -v /dev/nvidia*

删掉某个进程：
kill -9 PID(替换进程号)
sudo kill PID(替换进程号)
sudo kill -9 PID(替换进程号)

删掉某个用户下所有进程：
查出用户的所有pid，然后依次kill
pgrep -u celia | sudo xargs kill -9

或者直接pkill -u celia



## 创建环境完整流程

查看现有的conda环境  ：conda env list  或  conda info -e 

创建环境：conda create -n wh_tensorflow python=3.7.12

激活环境：conda activate Poseur

查看当前环境下的所有包：conda list 

退出虚拟环境：conda deactivate

删除虚拟环境：conda remove -n HRNet --all

配置环境：pip install -r requirements.txt

生成requires.txt: pip freeze > requires.txt



拷贝环境： conda create -n open --clone HRFormer

path是通过conda info --envs得到

eg：conda create -n HRFormer --clone /home/celia/anaconda3/envs/ViTPose



[pytorch官网](https://pytorch.org/get-started/previous-versions/)

```
pip install torch==1.6.0+cu101 torchvision==0.7.0+cu101 -f https://download.pytorch.org/whl/torch_stable.html

conda install pytorch==1.6.0 torchvision==0.7.0 cudatoolkit=10.1 -c pytorch
```

[mmcv安装](https://mmcv.readthedocs.io/zh_CN/latest/get_started/installation.html)

pip install mmcv-full==1.6.0 -f https://download.openmmlab.com/mmcv/dist/cu102/torch1.10.1/index.html

## 已有环境

VideoMAE：VideoMAE动作识别代码的环境，其中DeepSpeed比较难装

ROMP：romp人体姿态估计环境

pose_udp：classification-pytorch-main分类网络环境

importlib-metadata==4.2

## 训练问题报错

### 1.mmdetection多卡训练中报警告semaphore_tracker: There appear to be 14 leaked semaphores to clean up at shutdow

不是在mmdetection中，而是自己跑程序也遇到了这个问题。解决方法就是删掉用户下所有进程再重新跑

### 2.[Linux用conda创建虚拟环境失败报错：Collecting package metadata (current_repodata.json): failed](https://blog.csdn.net/XTL151384/article/details/117808228)

更改了镜像源。服务器原来的：

```
channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
  - defaults
show_channel_urls: true
```

### 3.could not create work tree dir ‘xxxx’: Permission denied

```python
git clone --recursive git://github.com/isaacs/npm.git
```

在执行上面命令从git上clone的时候报了错误，报这个错误的原因就是正在写入或者克隆git仓库的目录没有写入的权限。

```
fatal: could not create work tree dir 'npm': Permission denied
```

解决办法就是先修改目录的权限然后在进行操作

```python
cd ../    （回退到当前目录的上一级）
sudo chmod o+w dirname  （dirname为当前目录的名字）
```

方法2：

sudo chmod -R 777 /工作目录

### 4.deepspeed安装

```dockerfile
先把DeepSpeed拷贝到一个地方

git clone https://github.com/microsoft/DeepSpeed.git ${STAGE_DIR}/DeepSpeed
cd DeepSpeed
DS_BUILD_OPS=1 pip install deepspeed
```



